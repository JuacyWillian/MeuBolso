#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout
#:import MDNavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationDrawerToolbar kivymd.navigationdrawer.NavigationDrawerToolbar
#:import NavigationDrawerIconButton kivymd.navigationdrawer.NavigationDrawerIconButton
#:import MDLabel kivymd.label.MDLabel
#:import MDList kivymd.list.MDList
#:import TwoLineAvatarListItem kivymd.list.TwoLineAvatarListItem
#:import ThreeLineAvatarListItem kivymd.list.ThreeLineAvatarListItem
#:import MDSpinner kivymd.spinner.MDSpinner
#:import MDCard kivymd.card.MDCard
#:import MDSeparator kivymd.card.MDSeparator
#:import MDFloatingActionButton kivymd.button.MDFloatingActionButton



<ContactListItem>:
    on_press: self.select_contact()

<ContactHeaderWidget>:
	orientation: 'vertical'
	size_hint_y: None
	height: photo.height + name.height

	AsyncImage:
		id: photo
		source: root.photo
		allow_stretch: True
		keep_ratio: False
		size_hint_y: None
		height: (self.width * 9) / 16
		padding: dp(4)

	MDLabel:
		id: name
		font_size: dp(24)
		text: root.name
		size_hint_y: None

<ContactAddressWidget>:
	orientation: 'vertical'
	size_hint_y: None
	height: title.height + sep.height + address_grid.height
	spacing: dp(4)
	MDLabel:
		id: title
		text: 'Addresses:'
	MDSeparator:
		id: sep
	GridLayout:
		id: address_grid
		cols:2
		size_hint_y: None
		height: root.grid_height

<ContactEmailWidget>:
	orientation: 'vertical'
	size_hint_y: None
	height: self.minimum_height
	spacing: dp(16)
	MDLabel:
		text: 'Emails:'
	MDSeparator:
	GridLayout:
		id: email_grid
		cols:2
		size_hint_y: None
		height: root.grid_height

<ContactPhoneWidget>:
	orientation: 'vertical'
	size_hint_y: None
	height: self.minimum_height
	spacing: dp(16)

	MDLabel:
		text: 'Phones:'
	MDSeparator:
	GridLayout:
		id: phone_grid
		cols:2
		size_hint_y: None
		height: root.grid_height


<HomeScreen>:
    name: 'home'
    on_pre_enter: self.before_load()

    MDLabel:
        text: 'Hello Home Screen'


<ContactScreen>:
    name: 'contacts'
    MDSpinner:
        id: spinner
        size_hint: None, None
        size: dp(46), dp(46)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        active: True


<NewContactScreen>:
    name: 'newcontact'
    ContactPhotoWidget:


<ViewContactScreen>:
    ScrollView:
        do_scroll_x: False

        BoxLayout:
			orientation: 'vertical'
			size_hint_y: None
			padding: dp(4), dp(4)
			spacing: dp(4)
			height: self.minimum_height

			ContactHeaderWidget:
				id: cheaderwidget

            ContactPhoneWidget:
            	id: cphonewidget

            ContactEmailWidget:
            	id: cemailwidget

            ContactAddressWidget:
            	id: caddresswidget


<EditContactScreen>:
    name: 'editcontact'
    on_pre_enter: self.before_load()

    Image:
        id: contactphoto


<IncomeScreen>:
    name: 'incomes'
    on_pre_enter: self.before_load()
    MDLabel:
        text: 'incomes'


<NewIncomeScreen>:
    name: 'newincome'
    on_pre_enter: self.before_load()


<EditIncomeScreen>:
    name: 'editincome'
    on_pre_enter: self.before_load()


<SettingsScreen>:
    name: 'settings'
    on_pre_enter: self.before_load()
    MDLabel:
        text: 'settings'


<AboutScreen>:
    name: 'about'
    on_pre_enter: self.before_load()
    Image:
        source: 'screenshots.jpg'
    Label:
        text_size: root.width, None
        size: self.texture_size


<MyScreenManager>:


<MyRootLayout@NavigationLayout>:


MyRootLayout:
    MDNavigationDrawer:
        id: nav_drawer

        NavigationDrawerToolbar:
            title: "Meu Bolso"
            left_action_items: [['arrow-left', lambda x: app.root.toggle_nav_drawer()]]

        NavigationDrawerIconButton:
            icon: 'home'
            text: "Inicio"
            on_release: root.switch_to('home')

        NavigationDrawerIconButton:
            icon: 'account-multiple'
            text: "Contacts"
            on_release: root.switch_to('contacts')

        NavigationDrawerIconButton:
            icon: 'cash-multiple'
            text: "Cash Flow"
            on_release: root.switch_to('incomes')

        NavigationDrawerIconButton:
            icon: 'settings'
            text: "Settings"
            on_release: root.switch_to('settings')

        NavigationDrawerIconButton:
            icon: 'help-circle'
            text: "About"
            on_release: root.switch_to('about')

        NavigationDrawerIconButton:
            icon: 'exit-to-app'
            text: "Quit"
            on_release: app.stop()

    BoxLayout:
        orientation: 'vertical'

        Toolbar:
            id: toolbar
            title: "Meu Bolso"
            left_action_items: [['menu', lambda x: app.root.toggle_nav_drawer()]]

        MyScreenManager:
            id: scr_mngr
            HomeScreen:
