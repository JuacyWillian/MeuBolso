#:import NavigationLayout kivymd.navigationdrawer.NavigationLayout
#:import MDNavigationDrawer kivymd.navigationdrawer.MDNavigationDrawer
#:import NavigationDrawerToolbar kivymd.navigationdrawer.NavigationDrawerToolbar
#:import NavigationDrawerIconButton kivymd.navigationdrawer.NavigationDrawerIconButton
#:import MDLabel kivymd.label.MDLabel
#:import MDList kivymd.list.MDList
#:import TwoLineAvatarListItem kivymd.list.TwoLineAvatarListItem
#:import ThreeLineAvatarListItem kivymd.list.ThreeLineAvatarListItem
#:import MDSpinner kivymd.spinner.MDSpinner

<ContactListItem>:
    on_press: self.select_contact()


<HomeScreen>:
    name: 'home'
    on_pre_enter: self.before_load()

    MDLabel:
        text: 'Hello Home Screen'


<ContactScreen>:
    name: 'contacts'
    MDSpinner:
        id: spinner
        size_hint: None, None
        size: dp(46), dp(46)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        active: True

    ScrollView:
        do_scroll_x: False
        MDList:
            id: contact_lv


<NewContactScreen>:
    name: 'newcontact'
    on_pre_enter: self.before_load()


<ViewContactScreen>:
#    on_pre_enter: self.before_load()
    ScrollView:
        do_scroll_x: False
        BoxLayout:
            orientation: 'vertical'

            MDLabel:
                text: root.name

            MDLabel:
                text: str(root.photo)

            MDLabel:
                text: root.status

            MDLabel:
                text: str(root.addresses)

            MDLabel:
                text: str(root.phones)

            MDLabel:
                text: str(root.emails)

            MDLabel:
                text: str(root.incomes)


<EditContactScreen>:
    name: 'editcontact'
    on_pre_enter: self.before_load()

    Image:
        id: contactphoto


<IncomeScreen>:
    name: 'incomes'
    on_pre_enter: self.before_load()
    MDLabel:
        text: 'incomes'


<NewIncomeScreen>:
    name: 'newincome'
    on_pre_enter: self.before_load()


<EditIncomeScreen>:
    name: 'editincome'
    on_pre_enter: self.before_load()


<SettingsScreen>:
    name: 'settings'
    on_pre_enter: self.before_load()
    MDLabel:
        text: 'settings'


<AboutScreen>:
    name: 'about'
    on_pre_enter: self.before_load()
    Image:
        source: 'screenshots.jpg'
    Label:
        text_size: root.width, None
        size: self.texture_size



<MyScreenManager>:

<MyRootLayout@NavigationLayout>:


MyRootLayout:
    MDNavigationDrawer:
        id: nav_drawer

        NavigationDrawerToolbar:
            title: "Meu Bolso"
            left_action_items: [['arrow-left', lambda x: app.root.toggle_nav_drawer()]]

        NavigationDrawerIconButton:
            icon: 'home'
            text: "Inicio"
            on_release: root.switch_to('home')

        NavigationDrawerIconButton:
            icon: 'account-multiple'
            text: "Contacts"
            on_release: root.switch_to('contacts')

        NavigationDrawerIconButton:
            icon: 'cash-multiple'
            text: "Cash Flow"
            on_release: root.switch_to('incomes')

        NavigationDrawerIconButton:
            icon: 'settings'
            text: "Settings"
            on_release: root.switch_to('settings')

        NavigationDrawerIconButton:
            icon: 'help-circle'
            text: "About"
            on_release: root.switch_to('about')

        NavigationDrawerIconButton:
            icon: 'exit-to-app'
            text: "Quit"
            on_release: app.stop()

    BoxLayout:
        orientation: 'vertical'

        Toolbar:
            id: toolbar
            title: "Meu Bolso"
            left_action_items: [['menu', lambda x: app.root.toggle_nav_drawer()]]

        MyScreenManager:
            id: scr_mngr
            HomeScreen:
